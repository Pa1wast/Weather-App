const e="ecdfbd386d04459d8a9100346231710";async function t(e,t,a,r){let i=await fetch(`http://api.weatherapi.com/v1/${r}.json?key=${a}&q=${e},${t}&days=3aqi=no`),n=await i.json();return n}const a={position:{},weatherData:{},curUnit:"\xb0C",date:{time:{hour:"",minute:"",seconds:""},day:""}};setInterval(()=>{let e=document.querySelector("[data-current-day]"),t=document.querySelector("[data-current-time]"),r=document.querySelector("[data-current-time-unit]"),i=new Date;a.date={time:{hour:i.getHours()>12?i.getHours()-12:i.getHours(),minute:i.getMinutes(),seconds:i.getSeconds()},day:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][i.getDay()]},e.innerHTML=`${a.date.day},`,t.innerHTML=`${a.date.time.hour.toString()}:${a.date.time.minute<10?"0"+a.date.time.minute.toString():a.date.time.minute.toString()}:${a.date.time.seconds<10?"0"+a.date.time.seconds.toString():a.date.time.seconds.toString()}`,r.innerHTML=`${i.getHours()>=12?"PM":"AM"}`},1e3);//////////////////////////////////////////////////////////
const r=new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e(void(a.position.latitude=t.coords.latitude,a.position.longitude=t.coords.longitude))}):t("Can't access your position!")});async function i(){await r;let i=await t(a.position.latitude,a.position.longitude,e,"forecast");c(i)}async function n(e){try{let t=await fetch(`https://geocode.maps.co/search?q=${e}`),r=await t.json();a.position.latitude=r[0].lat,a.position.longitude=r[0].lon,a.weatherData.cityName=r[0].display_name.split(" ")[0].replace(",","")}catch(e){throw e}}async function o(r){try{await n(r),console.log(a.position);let i=await t(a.position.latitude,a.position.longitude,e,"forecast");c(i)}catch(e){throw e}}function c(e){let t=e.current,r=e.forecast,i=e.location;a.weatherData={cityName:i.name,tempC:t.temp_c,tempF:t.temp_f,icon:t.condition.icon,description:t.condition.text,highlights:{flTempC:t.feelslike_c,flTempF:t.feelslike_f,highTempC:r.forecastday[0].day.maxtemp_c,highTempF:r.forecastday[0].day.maxtemp_f,lowTempC:r.forecastday[0].day.mintemp_c,lowTempF:r.forecastday[0].day.mintemp_f,avgTempC:r.forecastday[0].day.avgtemp_c,avgTempF:r.forecastday[0].day.avgtemp_f,wind:{windSpeed:t.wind_kph,windDegree:t.wind_degree}},forecast:{text:[r.forecastday[0].astro.sunrise,r.forecastday[0].astro.sunset],forecastHour:r.forecastday[0].hour.map((e,t)=>{let a=e.time.split(" ")[1];return"00:00"===a&&(a="12:00"),t<12?a+=" AM":"12:00"!==a?a=a.slice(0,2)-12+":00 PM":a+=" PM",e={time:a,tempC:e.temp_c,tempF:e.temp_f}})}}}class s{currentIcon=document.querySelector("[   data-current-weather-icon]");weatherCardDate=document.querySelectorAll(".weather-card-date");weatherCardIcon=document.querySelectorAll(".data-weather-card-icon");weatherCardTemps=document.querySelectorAll(".weather-card-temps");highlightTitle=document.querySelectorAll(".highlight-card-title");highlightDetails=document.querySelectorAll(".highlight-card-data-details");highlightDescription=document.querySelectorAll(".highlight-card-description");units=document.querySelector(".switch-temp-unit");unitC=document.querySelector(".C");unitF=document.querySelector(".F");curTemp=document.querySelector("[data-current-weather-temp]");curUnit=document.querySelector("[data-current-temp-unit]");curText=document.querySelector("[data-current-forcast-text]");curTextExtra=document.querySelector("[data-current-forcast-text-extra]");curCity=document.querySelector("[data-city-name]");searchBarContainer=document.querySelector(".search-bar");searchBar=document.querySelector("[data-search-bar]");searchIcon=document.querySelector(".search-icon");updateCurIcon(e){this.currentIcon.src=e}updateTemp(e,t){this.curTemp.innerText=e,this.curUnit.innerText=t}updateCurText(e,t){this.curText.innerText="Sunrise - "+e[0],this.curTextExtra.innerText="Sunset - "+e[1],this.curCity.innerText=t}updateWeatherCards(e,t="\xb0C",a="today"){let r=new Date,i=r.getHours(),n=i>=17?[...e.slice(i+1),...e.slice(0,17)]:[...e.slice(i+1)];this.weatherCardDate.forEach((e,t)=>{e.innerText=n[t].time}),this.weatherCardTemps.forEach((a,r)=>{"\xb0C"===t?a.innerText=e[r].tempC+"\xb0":a.innerText=e[r].tempF+"\xb0"})}updateHighlightCards(e,t="\xb0C"){let a=Array.from(this.highlightDetails),r=a.splice(-2),i=Array.from(Object.values(e.highlights)),n=i.pop(-1),o=i.filter((e,t)=>{if(t%2==0)return e}),c=i.filter((e,t)=>{if(t%2!=0)return e});a.forEach((e,a)=>{"\xb0C"===t&&a<=4?(e.querySelector(".data-value").innerText=Math.round(o[a]),e.querySelector(".value-unit").innerText="\xb0C"):"\xb0F"===t&&(e.querySelector(".data-value").innerText=Math.round(c[a]),e.querySelector(".value-unit").innerText="\xb0F")}),r.forEach((e,t)=>{0===t?e.querySelector(".data-value").innerText=Math.round(n.windSpeed):e.querySelector(".data-value").innerText=Math.round(n.windDegree)})}addSwitchUnitHandler(e){this.units.addEventListener("click",t=>{if(!t.target.classList.contains("button-switch-unit"))return;let a=Array.from(this.units.children);a.forEach(e=>e.classList.remove("active-temp-unit"));let r=t.target;r.classList.add("active-temp-unit");let i=r.innerText;e(i)})}addSearchHandler(e){this.searchBar.addEventListener("keypress",t=>{if("Enter"===t.key){if(!t.target.value){this.ErrorMessage();return}e(t.target.value),t.target.value="",this.ErrorMessage("hide")}}),this.searchIcon.addEventListener("click",()=>{let t=this.searchBar.value;if(!t){this.ErrorMessage();return}e(t),this.searchBar.value="",this.ErrorMessage("hide")})}ErrorMessage(e="show"){"show"===e?this.searchBarContainer.classList.add("error"):"hide"===e&&this.searchBarContainer.classList.remove("error")}}var d=new s;async function u(){await i(),d.updateCurIcon(a.weatherData.icon),"\xb0C"===a.curUnit?(d.updateTemp(a.weatherData.tempC,"\xb0C"),d.updateWeatherCards(a.weatherData.forecast.forecastHour,"\xb0C"),d.updateHighlightCards(a.weatherData,"\xb0C")):(d.updateTemp(a.weatherData.tempF,"\xb0F"),d.updateWeatherCards(a.weatherData.forecast.forecastHour,"\xb0F"),d.updateHighlightCards(a.weatherData,"\xb0F")),d.updateCurText(a.weatherData.forecast.text,a.weatherData.cityName)}async function h(e){try{await o(e),u()}catch(e){d.ErrorMessage()}}u(),d.addSwitchUnitHandler(function(e){a.curUnit=e,u()}),d.addSearchHandler(h);//# sourceMappingURL=index.6b6f4d70.js.map

//# sourceMappingURL=index.6b6f4d70.js.map
